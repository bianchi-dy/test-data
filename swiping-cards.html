<!DOCTYPE html>
<head>
  <meta charset="utf-8" />
  <title>Swiper demo</title>
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1"
  />
  <!-- Link Swiper's CSS -->
  <link
    rel="stylesheet"
    href="https://unpkg.com/swiper/swiper-bundle.min.css"
  />
  <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://d3js.org/d3.v6.js"></script>
</head>

<!-- Demo styles -->
<style>
  @import url('https://fonts.googleapis.com/css2?family=Space+Grotesk&display=swap');
  .swiper {
    width: 340px;
    /* height: 320px; */
  }

  .swiper-slide {
    font-family: 'Space Grotesk', sans-serif;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    background-color: #fff;
    color: #38344D;
  }

  .swiper-scenario {
    color: #8B8B8B;
    font-size: 12px;
  }

  .swiper-header{
    font-size: 12px;
  }

  .swiper-text{
    font-size: 16px;
    font-weight: 200;
  }
</style>

<body>
  <!-- Swiper -->
  <div class="swiper mySwiper">
    <div class="swiper-wrapper">
    </div>
  </div>

  <!-- Swiper JS -->
  <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
</body>
<!-- Initialize Swiper -->
<script>
  function generateHTML(obj) {
    let text0 = 
      `<div class="flex justify-center">
        <div class="block p-4 bg-white max-w-sm">
          <img class="w-full bg-cover" src="images/${obj.img}">
          <p class="font-light text-right text-sm swiper-scenario mb-4">Image generated by AI at creator.nightcafe.studio</p>
       `;
    
    let text1 = 
      `<div class='mb-4'>
        <p class="swiper-header uppercase font-bold">Job Title</p>
        <p class="swiper-text">${obj.jobtitle}</p>
      </div>
      `;

    let text2 = `<div class='mb-4'>
      <p class="swiper-header uppercase font-bold">What does this job look like?
      </p>`;

    for (let i in obj.jobdesc) {
      let para = obj.jobdesc[i];
      text2 += 
        `<p class="swiper-text mb-2">${para}</p>
        `;
    }

    let text3 = `<div class='mb-4'>
      <p class="swiper-header uppercase font-bold">Why does this job exist?
      </p>`;

    for (let i in obj.jobreason) {
      let para = obj.jobreason[i];
      text3 += 
        `<p class="swiper-text mb-2">${para}</p>
        `;
    }

    let text4 = `<div class='mb-4'>
      <p class="swiper-header uppercase font-bold">Metaphor to describe this future</p>
      <p class="swiper-text mb-2">${obj.jobmetaphor}</p></div>
      `;

    text2 += `</div>`;
    text3 += `</div>`;
    return text0 + text1 + text2 + text3 + text4 + `</div></div>`
  };
  
  d3.json("https://raw.githubusercontent.com/bianchi-dy/test-data/main/data/test-data.json").then(function (data, error) {
      for (let i in data['data']) {
        let obj = data['data'][i];
        var div = document.createElement('div');
        let html = generateHTML(obj);
        d3.select(".swiper-wrapper").append('div').attr('class', 'swiper-slide shadow-lg').html(html);
        console.log(obj.img);
      }
    }
  )

  var swiper = new Swiper(".mySwiper", {
    effect: "cards",
    grabCursor: true,
    loop: true,
    keyboard: true,
  });
</script>
